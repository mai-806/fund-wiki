# 14 день. Архитектуры компьютера. Вопросы 13-35.

## Здесь вся статья — сплошной словарик программиста

- [Хорошая статья про память](https://arch32.cs.msu.ru/Text/Chapter_02.pdf)!

- [Статья про кэш](https://arch32.cs.msu.ru/Text/Chapter_14.pdf)

### To do: 
- 16-35. указательные устройства (джойстик, таблет)
***

## 13-15 вопросы. Запоминающее устройство.

- Выполняют машинные команды.
- Регистры — верхний уровень.
- Память немного содержится и в самом процессоре.
- Регистровая память может быть проста. 
- Переименование на лету — признак процессора высшей лиги.

### Основная память

Память ПК — важнейшая его составляющая. Она представляет собой иерархию памятей.
- Главная — `основная память`.
В оперативной памяти выполнялось сложение чисел.
Сейчас регистровая архитектура.

Сначала память выполнялась в виде `фиритовых колец`. Намагниченные - 1, нет - 0.

- [Хорошая статья про память](https://arch32.cs.msu.ru/Text/Chapter_02.pdf)!

У памяти фиритовой есть `недостаток`: предполагался ручной труд, что немобильно и неминиатюрно.
К тому же фиритовая память `медленная`. Её размеры не могли расти, ибо она занимала бы целые помещения.
- Её плюс в энергонезависимости. Даже если питание пропадало, то при повторном включении компьютера работа начиналась с того же момента.

- `Фиритовая память сменилась полупроводниковой` энергозависимой памятью. Но это не такой критичный недостаток, ведь выигрыш её очевиден.
Её плюс — в габаритах. Она более ёмкая, миниатюрная, и стала при этом быстрее.

***Физико-технические характеристики***: память состоит из микроконденсаторов, хранящих единицы.
Их заряжали, но пока заряд тёплый, их подкармливали (память сама себя подкармливала).

Поплупроводниковая память основана на микроконденсаторах, которые необходимо подзаряжать — постоянно подбрасывать в печку дрова.

Процессор и память общаются через шину (на техническом уровне).

Но физический уровень — сидит на шине контроллер памяти, которые сейчас сидят на процессоре.

## Виртуальная память, сегменты
Когда мало буферов, кэш память обращается к виртуальной, и вторая замедляется.

- Программа от данных при выполнении не отличается, отличается при хранении (???)
- Понятие оперативной памяти ушло!
- Основная память не операбельна, прекратилось непосредственное взаимодействие с данными.
- Оперативная память медленнее основной.
- Она не операбельна! 
И зачем нам медленная память?

Она может быть медленнее процессора, но больше по объему и доступнее по цене.

SAS круче чем SATA, SAS — серверные диски.
- Основная память — резиденция программных данных. Она не операбельна!
- Она общается с процессором через канал памяти!
- Процессор — микроприбор, память — часть микроприбора.
- Память в процессоре является *его* памятью.
- ПЗУ — микропрограмма команд — процессор запускается и начинает работать. 
- ПЗУ хранит прошивку процессора, пока он не запущен.
- Процессор быстрый, но не способен помнить. Регистровая память процессора ничего не помнит.
- Память компьютера разбивается не на слово, а на байты — гибко для хранения уникальных данных.

`Машинное слово` — единица обработки данных.
Бит — не единица информации! Это минимальная единица представления данных

***

Какие адреса в машинной памяти?
Предел памяти — адресность архитектуры. 2^64 - 1 может адресовать.
Основная память — ширина регистра адреса.
Адресность современных процессоров — 64 бита.
Адреса нужны не только для байтов, но и для внешней памяти (адресация дисков)ю
Большие адреса позволяют хранить огромные массивы.


Микросхемная память с регенерацией — динамическая ячейка памяти подкармливает себя, обновляясь.

```yaml
Это Максим Горький.
- Память подкуривала папиросу, 
- когда одна догорала
```

Это быстрая, миниатюрная и надежная, но недолговечная память.

Память через разъемы подключалась к модулям на материнской плате. Модулы подсоединены к шине.
Основная память видится, будто на шине, но физически она бегает на высокоскоростной шине.

## Кэш-память

`Кэш` — небольшая адресуемая память между основной памятью и процессором.

- Кэш сглаживает разницу быстродействий, это буферная зона.
- Емкость кэш-памяти невелика.
- Она дорогая, быстрая, организована немного по-другому.

Частоиспользуемые слова записываются в кэш.

Если кэш переписывается, то что-то вытесняется в ОЗУ.
- Кэш `буферизует`. Он вдвое ускоряет работу компьютера.

Кэш меньше ждет обращений из памяти.
`Кэш — неадресуемая память`.

Кэш — ассоциативная память (ищет по содержанию).
Конструктивно удобно иметь кэш внутри процессора, так как это самый быстрый вид памяти.

Кэш на соседних типах будет уже медленнее. 
Кжш позволяет не пропускать циклы ожидания память.
Кэш может быть многоуровневым в процессоре, на плате.

## Модуль памяти, контроллер памяти.

Контроллер памяти раньше был на северном мосту.

Для сервера выгоднее более крупные обмены. Дешевая и емкая память не может работать на частоте процессора.
Выгоднее иметь кжш между ними.
Успех кэша основан на подавляющем числе слов, которые не используются.

## Виртуальная память

Позволяет держать в ОЗУ то, что надо в определённый момент, а остальное — на диске.
Ненужные слова тонут на диске, там же и хранятся.
Виртуальная память позволяет работать программе, будто у нее много слов. (?)

`Буфер` — место для временного хранения. 
Если storage не хватает, то программа будет работать медленнее.
Виртуальная память основана на буфере.

страницы — произвольные кусочки памяти.
страница целиком не нужна.
ядро загружается быстрее, если у него блоки.
страницы — беспорядочные куски памяти.
помимо физических лиц мильтавыаыва есть файлы программ.

сегментационно-страничная память (?)

внутри каждой страницы можно сделать свой сегмент.

Виртуальная память — воображаемая память.
Она обеспечивает иллюзию работы и кодинга.

виртуальная память никому не отказывает в доступе, просто всё идет медленно.

swapping памяти.

trashing - когда у storage мало памяти.

настоящая виртуальная память — сегментно-страничная.
это способ организовать оперативную память большого объема.

## 16-35 вопрос. Внешние устройства ввода-вывода

- `Ввод` — перемещение сообщения от человека к компьютеру, где оно становится операбельным. Ввод идет от человека.

- `Вывод` — обратное перемещение между компьютером и человеком.
Это не только трансфер. это преобразование.

> Диск не является устройством ввода-вывода. в нем нет человека.
> - С помощью диска переходит перемещение данных длительного хранения.

А ещё обмен информации по сети не является вводом-выводом.

## Клавиатура

`Клавиатура` — устройство ввода текстовых данных.
Нажав на каждую кнопку, мы заставляем работать клавиатурный скан-код (клавиатура не вырабатывает ASCII код!)

При этом идет проверка на зажатый CAPS-lock.

Скан-код летит на шину через устройство присоединения, а драйвер клавиатуры производит обработку информации.
Драйвер извлекает букву (или зажатое сочетание клавиш) и выдаёт результат нажатия.

Клавиатурный процессор (?)

Клавиатура — одно из последовательных устройств, т.к. скан-код летит побитово.

## Микрофон

`Микрофон` — устройство ввода аналогового сообщения — звука  (воздух тоже аналоговый)
- ***Передача звука в аналоговом микрофоне:***
— звук;
— мембрана;
— ток;
— провод;
— преобразование в пулеметную очередь из двоичного кода;
— звуковая карта;
— преобразование переменного тока в данные;
— данные на выходе

- ***Передача звука в цифровом микрофоне:***
Если микрофон цифровой — звук поступает в программу на компьютер.

волны — мембрана — датчик — передача цифры или аналога

`Аудиоколонки`
> Как выдать звуковой сигнал, слышимый человеком?

Любой микрофон и любая колонка хотя бы наполовину аналоговые.
- Колонка — в конце аналоговая. Мембрана колеблется, чтобы звук дошёл до уха.

Усилитель звука — аналоговый.
А цифровая звуковая карта даёт цифровой звук.

> © Высшее образование неидеальное.


Наш голос и уши — аналоговые. Цифровая информация удобна для хранения, обработки и передачи.

Важно описывать физико-технический эффект.


## Принтеры

Раньше у принтеров была типографская технология (размножение текстов).
Потом появились печатные машинки.

Первые десятилетия печатная машинка не была компьютерной.

В эпоху мейнфреймов на 1 пк приходилось 100 человек. Нужна была производительная замена печатной машинке.
Сначала принтеры были узкими: печатали числа с плавающей точкой в столбик.

`1-е принтеры` были `барабанного типа`: АЦ ПУ — построчный принтер.

Выпуклый шаблон изображения при отпечатывании на бумаге.
До 160 знаков в строке и до 1000 об/мин

`Матричные, или игольчатые принтеры`.

Образ каждой буквы отображался на растр иголке
Принимает входные данные в коде ASCII и печатает тексты

Чтобы напечатать строку, надо пройтись иголками по всей ленте.
Лента смазана мастикой.
Почему эти принтеры пришли?
Они более миниатюрны и в десятки раз дешевле, хотя и шумны.
За счёт своих достоинств они стали более распространены и ставились рядом с рабочими местами.

Фактически за копейки людям предоставили возможность печатать картины.
Недостаток матричного принтера — лента сырая.

Лента проходит поперёк листа бумаги. Иголка втыкается там, где должны быть буквы.
Линейка иголок проходит матрицу по столбцам (не очень медленно) и возвратно-поступательными движениями наносит краску на бумагу.

> В центробанке журнал денежных операций печатает на матричном принтере!

`Струйные принтеры.`

В `соплах` струйных принтеров находятся `чернила` определённого цвета.
Печать происходит почти тем же способом, что и в игольчатом принтере.
Здесь `сопло плюётся каплями` чернил, причем ***без клякс***, что обеспечено устройством сопла.
Капелька вскипевших чернил выплёвывается в виде паров и тут же оседает на бумаге, не успев растечься.

Струйные принтеры сами по себе дешевые, а чернила дорогие — недостаток. И сопла принтеров засыхают быстро, с чем трудно бороться.
Ещё эти чернила неводостойкие. При этом скорость печати такая же, а шум ниже. 

Качество струйных принтеров выше — на них печатают дипломы. На лазерных якобы нельзя печатать документы — проще подделывать.

`Лазерные принтеры.`

`Лазеры` этих принтеров `ничего не выжигают`, вопреки расхожему мнению.
Их мощности не хватит даже для выжигания пылинки.

Текст для печати подаётся в ASCII код.
Лазерный даёт типографское качество.
При печати ему тоже нужен шаблон буквы.
В лазерных принтерах лазер светит на селеновый бортик.

Выходит узкий лучик, светящий в нужные места.

Селен — полупроводник (полу- , потому что заряд не уходит).
Заряд на нем накапливается в форме буквы (или в виде изображения), а остальные части не электризуются.

Барабан принтера крутится, одновременно тонер сыплется на барабан.
Тонер переносится на бумагу без размазывания и расчищается ракелью — особым ножом.
- `Тонер` — это сажа + порошковая пластмасса + кварцевый песок.
Барабан проходит несколько оборотов для одной страницы.
Барабан всё время остаётся холодным!

> Лазер нужен для электризации!
> - Лазер — это не убийца, а полупроводниковый светодиод.

Внутри также есть тефлоновый барабан. 
Внутри него находится нагревательная спираль, благодаря которой он нагревается до ~200°C (это другой барабан!)

Соприкоснувшись с краской, горячий тефлоновый барабан нагревает пластмассу, и тонерная смесь налипает на бумагу в виде букв.

> Без песка идет плохое прилипание и соскабливание, поэтому он важен для смеси.
> - Песок позволяет нанести это на бумагу.

***Достоинства***: 
- качество печати на типографском уровне — 300-600 dpi (dots per inch) 
- работает быстро
Недостатки:
- эта схема только для одноцветного принтера.
- для многоцветного схема не будет такой дешёвой.
- дипломы не печатают на лазерных принтерах из-за гербовой бумаги

Изначально лазерный принтер более тяжёлый, чем струйный, и энергоёмкий.
Получается сравнительно дорогой принтер, но тонер дешёвый.

Цветные лазерные принтеры: 
В них тройной тракт по базису rgb 
- либо печатает тремя последовательным трактами, но тогда получается жалкое зрелище.
- зато чернила водостойкие

```yaml
Главное, чтобы печать не попала в микроволновку!
```

***

## Сканер. 
`Сканер` — устройство ввода.


`Планшетный тип`: лист кладется на стекло, под ним считывающее устройство сканирует документ.
На устройстве считывающая каретка едет за линейное время и по строкам сканирует документ, попиксельно перелавая изображение.

Cнизу подсветка: ***ламповая*** или ***светодиодная***.

`Ламповая`: лампа ярко светит. Такие сканеры лучше считывают изображение.

- Светодиодная хуже, зато дешевле.

- Сканирующая программа обрабатывает сырой формат RAW.

> Сканер — плоскостной линейно-полосочный фотоаппарат.

`ПЗС` - прибор захвата связи. (?)

- Xerox — аналоговый! Передаёт документ из рук в руки на расстоянии.
- А сканер и принтер — цифровые! Они запоминают информацию в компе.


## Мышка.

Вообще мышку сложно назвать устройством ввода-вывода. Это `указательное устройство, или манипулятор`, хотя конечно и устройство ввода тоже.

С помощью `оптических датчиков (светодиодов) или механических (с помощью колеса, как в старых мышках)` отслеживается ***перемещение мышки***.
Состояние отслеживается контроллером мыши.

Мышь работает в режиме указания.
Мышка старых форматов подключения PS2, din — аналоговая, а USB — аналогово-цифровая.

Металлический шар повторяет движение человеческой руки. Шарик соприкасается с датчиком, отслеживающим перемещение (x, y), которое преобразуется 
в переменный ток.
- В USB мыши нет механической части.

- Существуют и беспроводные мыши. Для их работы в порту компьютера должен быть передатчик, а у самой мыши — автономное питание.
Выделяют ряд проприетарных протоколов для приема потока данных от компьютера и пользователя.
Как правило, они рассчитаны на определенных производителей.

Но есть и не проприетарные, такие как `Bluetooth`. 
Bluetooth-мыши универсальны, ведь этот протокол встроен во многие современные компьютеры, а также в телефоны.

Почему нет Wifi-мышей? Все дело в мощности протокола. Bluetooth выходит мощнее Wifi сигнала.

`Гиро-мышь` — имеет датчик в пространстве (этой мышью можно управлять в воздухе).
Они обычно являются беспроводными. В гиро-мыши датчик не оптический, а гиро-датчик.
Эти проборы считают скорость и ускорение в воздухе.

## Видеокарта и монитор. Фотоаппарат

***Зрение человека***:

Человек видит благодаря зрительному нерву в глазу.
Глаз — фотоаппарат, в котором есть линза — хрусталик.
Он преломляет изображение, распознаёт его цвет и яркость.

Фактически модель фотоаппарата взята с глаза. 
На фотоаппарате есть и светочувствительная пластина 
Она фиксирует изображение.
Первая пластина была из солей серебра (примерно 150 лет назад).
Затем появилась стеклянная, а дальше стеллюлоидная.

Изображение закреплялось уже без света, чтобы не допустить засвечивание и порчу пластины и фотографии.

Благодаря плёночным фотоаппаратам была придумана киносъемка.

Водные технологии фиксации фото, безусловно, неудобны.
Их заменили телевизионные киноплёнки.
Там были матрицы из датчиков, на которые проецировалось изображение.
Введенное изображение переводилось в последовательный сигнал, и впоследствии переводилось на телевизор.

В фоточувствительных датчиках не было долговременности.
При этом всё это было аналоговой аппаратурой.

`Цифровой датчик` — твердотельный кристалл, на который напылена матрица из проводников. Он имеет оптическую чувствительность.

Цветовой датчик.

С помощью встроенных микропикселей датчик передает цифровое изображение, но последовательная передача сигнала обеспечивает медленную передачу.
Цифровое изображение попадает в контроллер камеры, а тот уже передаёт систему на шину.

`Видеокамера` — фотоаппарат, работающий быстро, в циклическом режиме. Она пишет видео и звук на физический носитель.
- Веб камера не рассчитана на запись.
- Видеокамера - recorder = вебкамера.

Почему 24 кадра достаточно?
Наше зрение инерционное. 24 кадров и выше достаточно, чтобы глаз считал изображение безрывковым.

Человек видит отраженное от сетны изображение обычным образом.

## Мониторы

Первые мониторы — телевизоры, но они ловили сигнал не из компьютера.

- `Аналоговый монитор` — телевизор, который приспособлен для показа изображений из компьютера (а не из эфира/студии).

VGA — аналоговый трапециевидный разъем из 15 пинов и 3 сегментов.
Это протокол передачи видеосигнала.

Монитор выдаёт изображение благодаря видеокарте. Компьютерный телевизор — аналоговый монитор.
(?) аналоговое цвето-кодирование.

Цветной rgb, капли rgb.

Видеокарта преобразовывает цифровые данные (сигналы) в аналоговый сигнал.
Для аналоговой аппаратуры 60 гц не очень.

Помимо помех в кабелях недостаток мониторов в дороговизне колбы. Это не как типография (клепание процессоров), производство было тяжким трудом.

Цвета в видеокарте закодированы целыми числами.
Экспозиционный — формат, который можно показывать.

Теорема: любой компьютер цифровой, но не бывает неаналоговых компьютеров.
Даже в крылатых ракетах есть крылышки — аналоговые вещи.

Хронология разъемов:
DVI, HDMI, DP — снова цифровые

EGA, CGA — старые цифровые
VGA — аналоговый

- Подробнее о [разъемах](https://ocomp.info/razemyi-monitorov-dvi-display-port.html)

Монитор последовательно зажигает пиксели.
Пиксели не являются фонариками, они являются затворками.

Позади затворов стоит лампа дневного света, которая подсвечивает.

Пиксели открывают/закрывают затворки света.
Затворы со светофильтрами при этом электронные (никакой механики).

MSTAR — процессоры мониторов.

Переключение идёт с помощью тока. Но это не реле!

ЖК используют органические носители.
ЖК мониторы недолговечны: лампа дневного света быстро выгорает.

Современные мониторы имеют светодиодную подсветку прямо на матрице (на каждом пикселе светодиод).

~2000 — LCD
~2010 — LED

`Ламповый звук` — звук, создаваемый при проходе через лампы.

У светодиодного монитора есть недостаток — низкое качество, яркость свечения.
Преимущество: явно показывает цифровое изображение.

DPI — аналоговый

VGA — аналогово-цифровой

DVI — аналогово-цифровой (но появился после VGA)

HDMI — цифровой (+ звуковой)

Аналоговый сигнал принимается, цифруется и выдаётся в привычном ему формате.

Если есть разъемы разных типов - это здорово для совместимости.
Пока VGA встречается много где.
DVI был первым, сейчас уходит.

Он все менее востребован: каждый DVI разъем удорожает устройство на 10$, ибо его использование проприетарное (платное).

HDMI имеет мультимедийный, более универсальный интерфейс, позволяющий ему связывать мультимедийную сеть.

.
